# Hosts
# Author: Connor Kelly
# Date: Jan 20, 2021
# Packages
library(readxl)
library(tidyverse)
library(foreign)
library(haven)
# Set directory
setwd("C:/Users/Connor/Documents/GitHub/MDI")
# Load Nigeria
library(readr)
burundi <- read_csv("Data/IOM DTM/burundi.csv")
View(burundi)
# Packages
library(sf)
# Load Burundi
shape <- st_read("Data/IOM DTM/bdi_admbnda_adm0_igebu_ocha_itos_20171103.shp")
# Load Burundi
shape <- st_read("Data/IOM DTM/bdi_adm_igebu_ocha_20171103_shp/bdi_admbnda_adm0_igebu_ocha_itos_20171103.shp")
View(shape)
ggplot() +
geom_sf(data=shape) + coord_sf()
# Load Burundi
shape <- st_read("Data/IOM DTM/bdi_adm_igebu_ocha_20171103_shp/bdi_admbnda_adm2_igebu_ocha_20171103.shp")
ggplot() +
geom_sf(data=shape) + coord_sf()
test <- burundi %>%
pivot_longer(!admin2, names_to="names", values_to = "values")
class(burundi$date)
burundi$date <- as.factor(burundi$date)
test <- burundi %>%
pivot_longer(!admin2, names_to="names", values_to = "values")
test <- burundi %>%
pivot_longer(!admin2, names_to="names", values_to = "values", values_ptypes = list(val='charachter'))
test <- burundi %>%
pivot_longer(!admin2, names_to="names", values_to = "values", values_ptypes = list(val='character'))
burundi <- burundi[-c(1,2)]
# Load Burundi
burundi <- read_csv("Data/IOM DTM/burundi.csv")
burundi <- burundi[-c(1,2,5,8:19)]
burundi %>%
pivot_wider(names_from = date, values_from = household)
burundi %>%
pivot_wider(names_from = date, values_from = individual)
test <- burundi %>%
pivot_wider(names_from = date, values_from = individual)
View(test)
View(test)
test2 <- merge(shape, test, by=c("admin2Name", "admin2"))
test2 <- merge(shape, test, by.x=c("admin2Name"), by.y=c("admin2"))
View(test2)
# Plot
ggplot(data=test2) +
geom_sf(aes(fill = `Apr 2018`))
test <- burundi %>%
pivot_wider(names_from = date, values_from = individual) %>%
group_by(admin2)
test <- burundi %>%
pivot_wider(names_from = date, values_from = individual) %>%
group_by(admin2) %>%
summarize_each(funs(sum))
test <- burundi %>%
pivot_wider(names_from = date, values_from = individual) #%>%
test <- burundi %>%
pivot_wider(names_from = date, values_from = individual) %>%
replace_na(0) %>%
group_by(admin2) %>%
summarize_each(funs(sum))
test <- burundi %>%
pivot_wider(names_from = date, values_from = individual) %>%
replace(is.na(.),0) %>%
group_by(admin2) %>%
summarize_each(funs(sum))
test2 <- merge(shape, test, by.x=c("admin2Name"), by.y=c("admin2"))
# Plot
ggplot(data=test2) +
geom_sf(aes(fill = `Apr 2018`))
test2 <- merge(shape, test, by.x=c("admin2Name"), by.y=c("admin2"), all.x=TRUE)
# Plot
ggplot(data=test2) +
geom_sf(aes(fill = `Apr 2018`))
# Plot
ggplot(data=test2) +
geom_sf(aes(fill = `Dec 2018`))
# Plot
ggplot(data=test2) +
geom_sf(aes(fill = `Jun 2019`))
test2 <- test2 %>% replace(is.na(.),0)
test2[is.na(test2)] <- 0
test2 <- merge(shape, test, by.x=c("admin2Name"), by.y=c("admin2"), all.x=TRUE)
test2[is.na(test2)] <- 0
View(shape)
# Plot
ggplot(data=test2) +
geom_sf(aes(fill = `Jun 2019`))
test2[, 16:31][is.na(test2)]<-0
test2[, 16:31][is.na(test2, 16:31)]<-0
test2[, 16:31][is.na(test2, 16:31)]<-0
test2
